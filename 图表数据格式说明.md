# 图表数据格式说明

## 后端API响应格式

### 1. 用户基本信息API
**接口地址**: `GET /api/user/userinfo`

后端应该在用户信息API中返回以下格式的数据：

```json
{
  "success": true,
  "user": {
    "name": "张三",
    "gender": "男",
    "age": 65,
    "region": "四川成都",
    "risks": [
      {
        "name": "健康风险评估",
        "level": "低",
        "label": "风险分数: 0.01"
      }
    ],
    "suggestions": [
      "减少高嘌呤食物摄入，每日饮水不少于2000ml",
      "每周进行3次30分钟以上的有氧运动",
      "建议3个月后复查骨密度和尿酸指标"
    ]
  }
}
```

### 2. 图表数据API
**接口地址**: `GET /api/user/charts`

后端应该返回以下格式的图表数据：

```json
{
  "success": true,
  "charts": {
      "radar": {
        "indicators": [
          { "name": "心血管", "max": 100 },
          { "name": "新陈代谢", "max": 100 },
          { "name": "肝功能", "max": 100 },
          { "name": "肾功能", "max": 100 },
          { "name": "睡眠质量", "max": 100 },
          { "name": "营养状况", "max": 100 }
        ],
        "values": [85, 72, 68, 60, 78, 65]
      },
      "disease": {
        "dates": ["10-01", "10-02", "10-03", "...", "01-13", "01-14", "01-15"],
        "hypertension": [32, 34, 36, "...", 52, 54, 56],
        "diabetes": [45, 47, 49, "...", 65, 67, 69],
        "osteoporosis": [68, 66, 64, "...", 48, 46, 44]
      },
      "bloodPressure": {
        "dates": ["10-01", "10-02", "10-03", "...", "01-13", "01-14", "01-15"],
        "systolic": [125, 128, 130, "...", 135, 138, 140],
        "diastolic": [82, 83, 84, "...", 86, 87, 88]
      },
      "bloodSugar": {
        "dates": ["10-01", "10-02", "10-03", "...", "01-13", "01-14", "01-15"],
        "values": [5.2, 5.4, 5.6, "...", 6.0, 6.2, 6.4]
      },
      "bmi": {
        "dates": ["10-01", "10-02", "10-03", "...", "01-13", "01-14", "01-15"],
        "values": [24.5, 24.7, 25.0, "...", 25.5, 25.8, 26.0]
      },
      "sleep": {
        "dates": ["10-01", "10-02", "10-03", "...", "01-13", "01-14", "01-15"],
        "values": [6.5, 6.3, 6.0, "...", 5.5, 5.3, 5.1]
      },
      "heartRate": {
        "dates": ["10-01", "10-02", "10-03", "...", "01-13", "01-14", "01-15"],
        "values": [72, 74, 76, "...", 80, 82, 84]
      }
    }
  }
}
```

## 优势

1. **分离关注点**：用户基本信息和图表数据分开获取
2. **提高性能**：可以按需加载图表数据，减少主API的响应时间
3. **更好的缓存策略**：图表数据可以独立缓存，更新频率可以不同
4. **减少主API的复杂度**：用户信息API专注于基本数据
5. **更好的错误处理**：图表数据获取失败不会影响用户基本信息的显示

## 各图表数据说明

### 1. 雷达图 (radar)
- `indicators`: 雷达图的维度指标，每个指标包含 `name` 和 `max` 值
- `values`: 对应每个维度的实际数值

### 2. 慢性病趋势预测 (disease)
- `dates`: 100天的日期标签（格式：MM-DD）
- `hypertension`: 高血压风险数据（100个数值）
- `diabetes`: 糖尿病风险数据（100个数值）
- `osteoporosis`: 骨质疏松风险数据（100个数值）

### 3. 血压趋势 (bloodPressure)
- `dates`: 100天的日期标签（格式：MM-DD）
- `systolic`: 收缩压数据（100个数值）
- `diastolic`: 舒张压数据（100个数值）

### 4. 血糖趋势 (bloodSugar)
- `dates`: 100天的日期标签（格式：MM-DD）
- `values`: 血糖数值（100个数值）

### 5. BMI趋势 (bmi)
- `dates`: 100天的日期标签（格式：MM-DD）
- `values`: BMI数值（100个数值）

### 6. 睡眠时长 (sleep)
- `dates`: 100天的日期标签（格式：MM-DD）
- `values`: 睡眠时长数值（100个数值，单位：小时）

### 7. 心率变化 (heartRate)
- `dates`: 100天的日期标签（格式：MM-DD）
- `values`: 心率数值（100个数值，单位：次/分钟）

## 注意事项

1. 如果某个图表数据不存在，前端会使用默认的100天模拟数据
2. 日期标签格式为 MM-DD（如：01-15 表示1月15日）
3. 所有数据都应该包含100天的记录，从100天前到今天
4. 数值应该根据用户的真实健康数据生成
5. 所有数值都应该在合理范围内
6. 后端可以直接从数据库查询最近100天的体检记录，按日期排序返回 